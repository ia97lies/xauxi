<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="xauxi : reverse proxy" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>xauxi</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ia97lies/xauxi">View on GitHub</a>

          <h1 id="project_title">xauxi</h1>
          <h2 id="project_tagline">reverse proxy</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ia97lies/xauxi/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ia97lies/xauxi/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a name="welcome-to-xauxi" class="anchor" href="#welcome-to-xauxi"><span class="octicon octicon-link"></span></a>Welcome to xauxi.</h3>

<p>xauxi is a event driven reverse proxy. The configuration is a Lua script. In the configuration you have full access to the connection/request/response including the body data. It is easy to write own plugins to manipulate request, response and data. As http is just a plugin written in Lua it is possible to handle any kind of protocol by writing particular plugins. As it is event driven the plugins must keep track of their state while receiving the data. Plugins after the http plugin will only get the body data and a request record. It is possible to write plugins either in C/C++ or Lua.</p>

<p>Xau xi is vietnamese and stands for ugly. The idea is to solve standard use cases with a simple configuration but also be able to handle realy nasty situations. For example handle test clients or monitors different to normal user. It would be even possible to inject a configuration by authentication service, for example user specific settings bound to the users role.</p>

<p>Last but not least the fun factor and learning Lua is the main task here ;)</p>

<h3>
<a name="version" class="anchor" href="#version"><span class="octicon octicon-link"></span></a>Version</h3>

<p>Alpha vesion. Just checkout the git repo or download the tar ball provided by github. Write your very own small configuration, take test/simple as a base.</p>

<h3>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h3>

<ul>
<li>Simple response method</li>
<li>Request routing with standard Lua if conditions </li>
<li>Keepalive request (but not able to handle Connection header)</li>
<li>Concurrency</li>
</ul><h3>
<a name="how-to-build" class="anchor" href="#how-to-build"><span class="octicon octicon-link"></span></a>How to build</h3>

<pre><code>./configure &amp;&amp; make all
</code></pre>

<p>Binary can be found in the src directory.</p>

<h3>
<a name="how-to-run-tests" class="anchor" href="#how-to-run-tests"><span class="octicon octicon-link"></span></a>How to run tests</h3>

<p>You need httest (at least 2.4.8) installed. You can either get the tar ball from sourceforge and build it or if you are running ubuntu <code>sudo apt-get install httest</code></p>

<h4>
<a name="run-all-tests" class="anchor" href="#run-all-tests"><span class="octicon octicon-link"></span></a>Run all tests</h4>

<pre><code>make check
</code></pre>

<h4>
<a name="run-lua-unit-tests" class="anchor" href="#run-lua-unit-tests"><span class="octicon octicon-link"></span></a>Run lua unit tests</h4>

<p>Single lua tests</p>

<pre><code>cd test; ./lua_unit &lt;lua-file&gt;
</code></pre>

<h4>
<a name="run-integration-tests" class="anchor" href="#run-integration-tests"><span class="octicon octicon-link"></span></a>Run integration tests</h4>

<p>All httest</p>

<pre><code>cd test; ./run_httest.sh
</code></pre>

<p>Single httest</p>

<pre><code>./src/xauxi --root test/simple --lib lib &gt; xauxi.log &amp;
cd test; ./run.sh &lt;htt-file&gt;
</code></pre>

<h3>
<a name="how-to-start" class="anchor" href="#how-to-start"><span class="octicon octicon-link"></span></a>How to start</h3>

<pre><code>xauxi --root &lt;root-path&gt; --lib &lt;lib-paths&gt;
</code></pre>

<p><em>root-path</em> points to xauxi root directory. The root directory must contain a "conf" directory with the xauxi.lua configuration in it as well as a "run" directory for the pid file. Currently the log is written to stdout, you can redirect it to your log file.</p>

<pre><code>&lt;xauxi-root-dir&gt;/
&lt;xauxi-root-dir&gt;/conf/xauxi.lua
&lt;xauxi-root-dir&gt;/run
</code></pre>

<p><em>lib-paths</em> is a Lua path definition, where the xauxi Lua modules can be found. the Lua modules are in the lib directory of the tar ball.</p>

<p>Let's head and start xauxi in the tar ball, of course you need to ./configure &amp;&amp; make first.</p>

<pre><code>./src/xauxi --root test/simple --lib lib
</code></pre>

<h3>
<a name="sample-configuration" class="anchor" href="#sample-configuration"><span class="octicon octicon-link"></span></a>Sample configuration</h3>

<p>A sample configuration could look as follow</p>

<pre><code>http = require "http"

-- Frist simple proxy configuration 
function global()
  listen("localhost:8080",
    function(connection, data)
      http.stream(connection, data, function(r, data)
        if http.location(r.uri, "/foo") then
          r:say(200, "hit 1 /foo location")
        elseif http.location(r.uri, "/bar") then
          r:say(200, "hit 1 /bar location")
        else
          r:say(404, "404 Not Found")
        end
      end)
    end)
  go()
end
</code></pre>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>Project started 2013 by Christian Liesch (<a href="https://github.com/ia97lies" class="user-mention">@ia97lies</a>)</p>

<h3>
<a name="licence" class="anchor" href="#licence"><span class="octicon octicon-link"></span></a>Licence</h3>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache Licence Version 2.0</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">xauxi maintained by <a href="https://github.com/ia97lies">ia97lies</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
